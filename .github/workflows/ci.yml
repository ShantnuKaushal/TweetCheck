name: TweetCheck CI

on:
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

jobs:
  build-test:
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v3

    # 1. Build Go Ingestion
    - name: Build Go Service
      run: |
        cd services/go-ingestion
        docker build -t tweetcheck-go .

    # 2. Build Dashboard API
    - name: Build Dashboard API
      run: |
        cd services/dashboard-api
        docker build -t tweetcheck-api .

    # 3. Build AI Worker
    - name: Build AI Worker
      run: |
        cd services/ai-worker
        docker build -t tweetcheck-ai .
        
    # 4. Build Frontend
    - name: Build Frontend
      run: |
        cd frontend
        docker build -t tweetcheck-frontend .